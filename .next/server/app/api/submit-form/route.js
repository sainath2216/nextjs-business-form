(()=>{var e={};e.id=721,e.ids=[721],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},760:(e,n,t)=>{"use strict";t.r(n),t.d(n,{patchFetch:()=>p,routeModule:()=>c,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>d});var r={};t.r(r),t.d(r,{POST:()=>i});var s=t(2706),a=t(8203),o=t(5994),l=t(9187);let u=new(require("@prisma/client")).PrismaClient;async function i(e){try{let n=await e.json();console.log("API received:",n),await u.$connect(),console.log("Database connected"),[n.submitter?.firstName,n.submitter?.lastName].filter(Boolean).join(" ");let t=await u.formSubmission.create({data:{businessEmailId:n.general?.businessEmailId??null,businessName:n.general?.businessName,ownershipType:n.general?.ownershipType,partnerType:n.general?.partnerType,website:n.general?.website??null,vendorIndustryType:n.general?.vendorIndustryType,placeOfBusiness:n.general?.placeOfBusiness,bankName:n.bank?.bankName??null,accountNumber:n.bank?.accountNumber??null,ifscCode:n.bank?.ifscCode??null,bankDocument:n.bank?.bankDocument??null,gstType:n.gst?.gstType??null,gstNumber:n.gst?.gstNumber??null,gstCertificate:null,panNumber:n.gst?.panNumber??null,panDocument:null,hasMsmeUdyog:n.gst?.hasMsmeUdyog??null,msmeUdyogNumber:n.gst?.msmeUdyogNumber??null,msmeUdyogCertificate:null,title:n.contactPerson?.title??null,firstName:n.contactPerson?.firstName??null,lastName:n.contactPerson?.lastName??null,designation:n.contactPerson?.designation??null,countryCode:n.contactPerson?.countryCode??null,phoneNumber:n.contactPerson?.phoneNumber??null,hasEmail:n.contactPerson?.hasEmail??null,email:n.contactPerson?.email??null,addresses:n.address?.addresses??null,turnoverExceedingTenCrore:n.turnover?.turnoverExceedingTenCrore??null,hasFiledITR:n.turnover?.hasFiledITR??null,acknowledgementNo2021:n.turnover?.acknowledgementNo2021??null,filingDate2021:n.turnover?.filingDate2021?new Date(n.turnover.filingDate2021):null,acknowledgementNo2022:n.turnover?.acknowledgementNo2022??null,filingDate2022:n.turnover?.filingDate2022?new Date(n.turnover.filingDate2022):null,acknowledgementNo2023:n.turnover?.acknowledgementNo2023??null,filingDate2023:n.turnover?.filingDate2023?new Date(n.turnover.filingDate2023):null,submitterName:n.submitter?.name??null,submitterDesignation:n.submitter?.designation??null,submitterEmail:n.submitter?.email??null,declaration:n.submitter?.declaration??!1}});return console.log("Submission created:",t),l.NextResponse.json({success:!0,message:"Form submitted successfully",data:t},{status:200})}catch(e){return console.error("API error:",e),l.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error"},{status:500})}finally{await u.$disconnect()}}let c=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/submit-form/route",pathname:"/api/submit-form",filename:"route",bundlePath:"app/api/submit-form/route"},resolvedPagePath:"D:\\workfolder\\Business Partner\\src\\app\\api\\submit-form\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:m,workUnitAsyncStorage:d,serverHooks:g}=c;function p(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:d})}},6487:()=>{},8335:()=>{}};var n=require("../../../webpack-runtime.js");n.C(e);var t=e=>n(n.s=e),r=n.X(0,[989,452],()=>t(760));module.exports=r})();